<!DOCTYPE html>
<html lang="ar">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>ğŸ’€ ÙÙŠ Ø§Ù„Ø¶Ù„Ù…Ø© ğŸ’€</title>
<style>
  body {
    background: url( asd.jpg ) no-repeat center center fixed;
    background-size: cover;
    color: #e6e6e6;
    font-family:  Cairo , sans-serif;
    text-align: center;
    overflow-x: hidden;
    margin: 0;
    padding: 0;
    animation: fadeIn 2s ease-in-out;
  }

  @keyframes fadeIn {
    from { opacity: 0; }
    to { opacity: 1; }
  }

  h1 {
    font-size: 2.5em;
    color: #ff0000;
    text-shadow: 0 0 15px #ff0000;
    margin-top: 40px;
  }

  textarea {
    width: 80%;
    height: 100px;
    background: rgba(0,0,0,0.6);
    color: #fff;
    border: 2px solid #ff0000;
    border-radius: 10px;
    padding: 10px;
    font-size: 18px;
    outline: none;
  }

  button {
    background: #ff0000;
    color: white;
    border: none;
    border-radius: 10px;
    padding: 15px 40px;
    font-size: 20px;
    cursor: pointer;
    margin-top: 20px;
    transition: all 0.3s;
    box-shadow: 0 0 10px #ff0000;
  }

  button:hover {
    background: black;
    color: #ff0000;
    box-shadow: 0 0 20px #ff0000;
  }

  #story {
    width: 80%;
    margin: 40px auto;
    text-align: right;
    font-size: 20px;
    line-height: 1.8;
    background: rgba(0,0,0,0.6);
    padding: 20px;
    border-radius: 10px;
    border: 2px solid #ff0000;
    box-shadow: 0 0 20px #ff0000;
    direction: rtl;
  }

  footer {
    margin-top: 50px;
    padding: 20px;
    color: #aaa;
    background: rgba(0,0,0,0.7);
    font-size: 16px;
  }

</style>
</head>
<body>
  <h1>ğŸ’€ ÙÙŠ Ø§Ù„Ø¶Ù„Ù…Ø© ğŸ’€</h1>
  <p>Ø§ÙƒØªØ¨ ÙÙƒØ±Ø© Ù‚ØµØ© Ø±Ø¹Ø¨... ÙˆØ³Ø£Ø­ÙˆÙ„Ù‡Ø§ Ø¥Ù„Ù‰ Ø­ÙƒØ§ÙŠØ© Ù…Ø®ÙŠÙØ© ğŸ‘»</p>

  <textarea id="userInput" placeholder="Ù…Ø«Ù„Ø§Ù‹: Ø¨Ù†Øª ÙˆÙ‚Ø¹Øª Ù…Ù† Ø§Ù„Ø¨Ø±Ø¬ ÙˆØªØ­ÙˆÙ„Øª Ù„Ø¹ÙØ±ÙŠØªØ©..."></textarea><br>
  <button onclick="generateStory()">Ø§Ø­ÙƒÙ Ù„ÙŠ Ù‚ØµØ© ğŸ”®</button>

  <div id="story"></div>

  <audio id="rtt" src="rtt.mp3"></audio>

  <footer>Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø­Ù‚ÙˆÙ‚ Ù…Ø­ÙÙˆØ¸Ø© Â© Ù…/Ø±ÙˆÙ†Ù€ÙŠ Ø§Ù„Ø¨Ø­ÙŠØ±Ù‡</footer>

<script>
async function generateStory() {
  const input = document.getElementById("userInput").value.trim();
  const storyBox = document.getElementById("story");
  const music = document.getElementById("rtt");
  storyBox.innerHTML = "ğŸ‘» Ø¬Ø§Ø±ÙŠ ØªÙˆÙ„ÙŠØ¯ Ø§Ù„Ù‚ØµØ©...";

  if (!input) {
    storyBox.innerHTML = "âš ï¸ Ù…Ù† ÙØ¶Ù„Ùƒ Ø§ÙƒØªØ¨ ÙÙƒØ±Ø© Ù„Ù„Ù‚ØµØ© Ø£ÙˆÙ„Ø§Ù‹.";
    return;
  }

  try {
    const prompt = `Ø§ÙƒØªØ¨ Ù‚ØµØ© Ø±Ø¹Ø¨ Ù…Ø±Ø¹Ø¨Ø© Ø¬Ø¯Ù‹Ø§ Ø¹Ù† Ø§Ù„Ø¬Ù† ÙˆØ§Ù„Ø¹ÙØ§Ø±ÙŠØª Ø¨Ø£Ø³Ù„ÙˆØ¨ Ù…Ø´ÙˆÙ‚ Ø¨Ù†Ø§Ø¡Ù‹ Ø¹Ù„Ù‰ Ø§Ù„Ù†Øµ Ø§Ù„ØªØ§Ù„ÙŠ: ${input}`;
    const response = await fetch(`https://alakreb.vercel.app/api/ai/gpt?q=${encodeURIComponent(prompt)}`);
    const data = await response.text();

    if (!data || data.includes("error")) {
      throw new Error("API Error");
    }

    storyBox.innerHTML = "";
    music.currentTime = 0;
    music.play();

    // ØªØ£Ø«ÙŠØ± Ø§Ù„ÙƒØªØ§Ø¨Ø©
    let i = 0;
    const text = data + "\n\nâœï¸ Ù…Ø¤Ù„Ù Ø§Ù„Ù‚ØµØ©: Ø±ÙˆÙ†ÙŠ Ø§Ù„Ø¨Ø­ÙŠØ±Ù‡";
    const speed = 40;

    function typeWriter() {
      if (i < text.length) {
        storyBox.innerHTML += text.charAt(i);
        i++;
        window.scrollTo(0, document.body.scrollHeight);
        setTimeout(typeWriter, speed);
      }
    }
    typeWriter();

  } catch (error) {
    storyBox.innerHTML = "âš ï¸ Ø­Ø¯Ø« Ø®Ù„Ù„ Ø£Ø«Ù†Ø§Ø¡ ØªÙˆÙ„ÙŠØ¯ Ø§Ù„Ù‚ØµØ©... Ø¬Ø±Ø¨ ØªÙƒØªØ¨ Ù…ÙˆØ¶ÙˆØ¹ Ù…Ø®ØªÙ„Ù Ø£Ùˆ Ø£Ø¹Ø¯ Ø§Ù„Ù…Ø­Ø§ÙˆÙ„Ø© Ø¨Ø¹Ø¯ Ù„Ø­Ø¸Ø§Øª.";
  }
}
</script>
</body>
</html>
